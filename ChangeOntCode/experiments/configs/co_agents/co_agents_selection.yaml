#ChangeOntCode\experiments\configs\co_agents\co_agents_selection.yaml
apply_to_all_families: true
apply_to_all_modes: true

co_agents:
  # ===== Full CO blend (unchanged behavior, just explicit classic_planner) =====
  - type: "co"
    name: "CO_full"
    params:
      header: { mode: "SSI" }

      elements:
        haq:         { enabled: true,  history_len: 64, ema_alpha: 0.2 }
        ghvc:        { enabled: true,  mdl_lambda: 1.0, cooldown: 5, birth_threshold: 2.0 }
        density:     { enabled: true,  rounding: 2 }
        change_ops:  { enabled: true,  k: 4, mdl_select: true }
        vote_bridge: { enabled: true }
        action_head:
          enabled: true
          prefer_bus_if_present: true
          use_translator: true
          blend_mode: "mix"             # CO + classical blend (header co_weight still respected)
          classic_planner: "greedy"     # keep greedy classical for CO_full
          co_weight_override: null
          eps_on_cycle: 0.10
          ngram_order: 2
          greedy_explore_bias: 0.10

      primitives:
        co_bus: {}
        P0: {}
        bandit_stats: {}
        ngram_model: {}

      combinator:
        order: ["haq","ghvc","density","change_ops","vote_bridge","action_head"]

  # ===== Router: classical-only with A* + translator mask guardrails =====
  - type: "co"
    name: "CO_router"
    params:
      header: { mode: "SSI" }

      elements:
        # You can disable HAQ too; left on here since it's cheap and may enrich future routing logic
        haq:         { enabled: true,  history_len: 64, ema_alpha: 0.2 }
        ghvc:        { enabled: false }
        density:     { enabled: false }
        change_ops:  { enabled: false }
        vote_bridge: { enabled: true }
        action_head:
          enabled: true
          prefer_bus_if_present: true     # harmless when classic_only; bus still logged
          use_translator: true            # keeps anti-oscillation / blocking masks
          blend_mode: "classic_only"      # <- FORCE classical path
          classic_planner: "astar"        # <- use A* as the classical planner
          co_weight_override: 0.0         # <- belt & suspenders: ensures CO weight is zero
          eps_on_cycle: 0.00
          ngram_order: 0
          greedy_explore_bias: 0.00

      primitives:
        co_bus: {}
        P0: {}
        bandit_stats: {}

      combinator:
        order: ["haq","vote_bridge","action_head"]